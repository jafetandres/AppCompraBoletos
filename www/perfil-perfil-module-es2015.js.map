{"version":3,"sources":["./src/app/perfil/perfil.page.html","./src/app/perfil/perfil.module.ts","./src/app/perfil/perfil.page.scss","./src/app/perfil/perfil.page.ts","./src/app/perfil/perfil.resolver.ts"],"names":[],"mappings":"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","file":"perfil-perfil-module-es2015.js","sourcesContent":["module.exports = \"<ion-header>\\n    <ion-toolbar color=\\\"primary\\\">\\n      <ion-buttons slot=\\\"start\\\">\\n        <ion-back-button defaultHref=\\\"home\\\"></ion-back-button>\\n      </ion-buttons>\\n      <ion-title>Perfil</ion-title>\\n    </ion-toolbar>\\n  </ion-header>\\n  \\n  <ion-content padding>\\n    <div>\\n      <ion-row>\\n        <ion-col size=\\\"6\\\" offset=\\\"3\\\">\\n          <img [src]=\\\"image\\\" alt=\\\"this is the image\\\"/>\\n        </ion-col>\\n      </ion-row>\\n      <ion-row>\\n        <ion-col size=\\\"6\\\" offset=\\\"3\\\">\\n          <ion-button fill=\\\"outline\\\" expand=\\\"block\\\" size=\\\"small\\\" (click)=\\\"openImagePicker()\\\">Cambiar Foto</ion-button>\\n        </ion-col>\\n      </ion-row>\\n    </div>\\n    <form [formGroup]=\\\"validations_form\\\" (ngSubmit)=\\\"onSubmit(validations_form.value)\\\">\\n        <ion-item>\\n            <ion-label position=\\\"floating\\\" color=\\\"primary\\\">Nombre</ion-label>\\n            <ion-input type=\\\"text\\\" formControlName=\\\"displayName\\\"></ion-input>\\n          </ion-item>\\n      <ion-item>\\n        <ion-label position=\\\"floating\\\" color=\\\"primary\\\">Correo</ion-label>\\n        <ion-input type=\\\"text\\\" formControlName=\\\"email\\\"></ion-input>\\n      </ion-item>\\n      <!-- <ion-item>\\n        <ion-label position=\\\"floating\\\" color=\\\"primary\\\">Description</ion-label>\\n        <ion-input type=\\\"text\\\" formControlName=\\\"description\\\"></ion-input>\\n      </ion-item> -->\\n      <ion-button class=\\\"submit-button\\\" expand=\\\"block\\\" type=\\\"submit\\\" [disabled]=\\\"!validations_form.valid\\\">Guardar</ion-button>\\n    </form>\\n    <!-- <ion-button class=\\\"delete-button\\\" expand=\\\"block\\\" color=\\\"danger\\\" (click)=\\\"delete()\\\">Delete</ion-button> -->\\n  \\n  </ion-content>\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { Routes, RouterModule } from '@angular/router';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { PerfilPageRoutingModule } from './perfil-routing.module';\n\nimport { PerfilPage } from './perfil.page';\nimport { PerfilResolver } from './perfil.resolver';\nconst routes: Routes = [\n  {\n    path: '',\n    component: PerfilPage,\n    resolve: {\n      data: PerfilResolver\n    }\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ReactiveFormsModule,\n    RouterModule.forChild(routes)\n   \n  ],\n  declarations: [PerfilPage],\n  providers: [\n    PerfilResolver\n  ]\n})\nexport class PerfilPageModule {}\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BlcmZpbC9wZXJmaWwucGFnZS5zY3NzIn0= */\"","import { Component, OnInit } from '@angular/core';\nimport { AuthService } from 'src/services/auth.service';\nimport { LoadingController, ToastController } from '@ionic/angular';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Validators, FormBuilder, FormGroup, FormControl } from '@angular/forms';\nimport { ImagePicker } from '@ionic-native/image-picker/ngx';\nimport { WebView } from '@ionic-native/ionic-webview/ngx';\nimport { FirebaseService } from 'src/services/firebase.service';\n\n@Component({\n  selector: 'app-perfil',\n  templateUrl: './perfil.page.html',\n  styleUrls: ['./perfil.page.scss'],\n})\nexport class PerfilPage implements OnInit {\n  // items: Array<any>;\n  usuario: any;\n  validations_form: FormGroup;\n  image: any;\n\n\n  \n\n  constructor(\n    public loadingCtrl: LoadingController,\n    private authService: AuthService,\n    private router: Router,\n    private route: ActivatedRoute,\n    private formBuilder: FormBuilder,\n    public toastCtrl: ToastController,\n    private imagePicker: ImagePicker,\n    private webview: WebView,\n    private firebaseService: FirebaseService\n\n\n\n\n\n  ) { }\n\n  ngOnInit() {\n    if (this.route && this.route.data) {\n      this.getData();\n  }\n}\n\ngetData(){\n  this.route.data.subscribe(routeData => {\n   let data = routeData['data'];\n   if (data) {\n     this.usuario = data;\n     this.image=this.usuario.photoURL;\n     console.log(\"ruta imagen perfil\"+this.usuario.photoURL)\n  \n    //  this.image = this.item.image;\n   }\n  })\n  this.validations_form = this.formBuilder.group({\n    email: new FormControl(this.usuario.email, Validators.required),\n    displayName: new FormControl(this.usuario.displayName, Validators.required)\n  });\n}\nasync onSubmit(value){\n  // const loading = await this.loadingCtrl.create({\n  //   message: 'Please wait...'\n  // });\n  // const toast = await this.toastCtrl.create({\n  //   message: 'Image was updated successfully',\n  //   duration: 3000\n  // });\n  // this.presentLoading(loading);\n  // let image_src = this.webview.convertFileSrc(value.photoURL);\n\n\n  let data = {\n    email: value.email,\n    displayName: value.displayName,\n    photoURL: this.image\n\n   \n  }\n  this.firebaseService.actualizarPerfil(value.photoURL,data)\n  .then(\n    res => {\n      this.router.navigate([\"/home\"]);\n    }\n  )\n}\n\n\nopenImagePicker(){\n  this.imagePicker.hasReadPermission()\n  .then((result) => {\n    if(result == false){\n      // no callbacks required as this opens a popup which returns async\n      this.imagePicker.requestReadPermission();\n    }\n    else if(result == true){\n      this.imagePicker.getPictures({\n        maximumImagesCount: 1\n      }).then(\n        (results) => {\n          for (var i = 0; i < results.length; i++) {\n            this.uploadImageToFirebase(results[i]);\n          }\n        }, (err) => console.log(err)\n      );\n    }\n  }, (err) => {\n    console.log(err);\n  });\n}\n\nasync uploadImageToFirebase(image){\n  const loading = await this.loadingCtrl.create({\n    message: 'Por favor espere...'\n  });\n  const toast = await this.toastCtrl.create({\n    message: 'La imagen ha sido actualizada.',\n    duration: 3000\n  });\n  this.presentLoading(loading);\n  let image_src = this.webview.convertFileSrc(image);\n\n  //uploads img to firebase storage\n\n  this.firebaseService.uploadImage(image_src)\n  .then(photoURL => {\n    this.image = photoURL;\n    loading.dismiss();\n    toast.present();\n  }, err =>{\n    console.log(err);\n  })\n}\n  async presentLoading(loading) {\n    return await loading.present();\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { Resolve, ActivatedRouteSnapshot, ActivatedRoute } from \"@angular/router\";\nimport { FirebaseService } from 'src/services/firebase.service';\n\n@Injectable()\nexport class PerfilResolver implements Resolve<any> {\n\n  constructor(public firebaseService: FirebaseService,) { }\n\n  resolve(route: ActivatedRouteSnapshot) {\n\n    return new Promise((resolve, reject) => {\n     \n      this.firebaseService.getPerfil()\n      .then(data => {\n       \n        resolve(data);\n      }, err => {\n        reject(err);\n      })\n    })\n  }\n}"],"sourceRoot":""}