{"version":3,"sources":["./src/app/perfil/perfil.page.html","./src/app/perfil/perfil.module.ts","./src/app/perfil/perfil.page.scss","./src/app/perfil/perfil.page.ts","./src/app/perfil/perfil.resolver.ts"],"names":[],"mappings":"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","file":"perfil-perfil-module-es5.js","sourcesContent":["module.exports = \"<ion-header>\\n    <ion-toolbar color=\\\"primary\\\">\\n      <ion-buttons slot=\\\"start\\\">\\n        <ion-back-button defaultHref=\\\"home\\\"></ion-back-button>\\n      </ion-buttons>\\n      <ion-title>Perfil</ion-title>\\n    </ion-toolbar>\\n  </ion-header>\\n  \\n  <ion-content padding>\\n    <div>\\n      <ion-row>\\n        <ion-col size=\\\"6\\\" offset=\\\"3\\\">\\n          <img [src]=\\\"image\\\" alt=\\\"this is the image\\\"/>\\n        </ion-col>\\n      </ion-row>\\n      <ion-row>\\n        <ion-col size=\\\"6\\\" offset=\\\"3\\\">\\n          <ion-button fill=\\\"outline\\\" expand=\\\"block\\\" size=\\\"small\\\" (click)=\\\"openImagePicker()\\\">Cambiar Foto</ion-button>\\n        </ion-col>\\n      </ion-row>\\n    </div>\\n    <form [formGroup]=\\\"validations_form\\\" (ngSubmit)=\\\"onSubmit(validations_form.value)\\\">\\n        <ion-item>\\n            <ion-label position=\\\"floating\\\" color=\\\"primary\\\">Nombre</ion-label>\\n            <ion-input type=\\\"text\\\" formControlName=\\\"displayName\\\"></ion-input>\\n          </ion-item>\\n      <ion-item>\\n        <ion-label position=\\\"floating\\\" color=\\\"primary\\\">Correo</ion-label>\\n        <ion-input type=\\\"text\\\" formControlName=\\\"email\\\"></ion-input>\\n      </ion-item>\\n      <!-- <ion-item>\\n        <ion-label position=\\\"floating\\\" color=\\\"primary\\\">Description</ion-label>\\n        <ion-input type=\\\"text\\\" formControlName=\\\"description\\\"></ion-input>\\n      </ion-item> -->\\n      <ion-button class=\\\"submit-button\\\" expand=\\\"block\\\" type=\\\"submit\\\" [disabled]=\\\"!validations_form.valid\\\">Guardar</ion-button>\\n    </form>\\n    <!-- <ion-button class=\\\"delete-button\\\" expand=\\\"block\\\" color=\\\"danger\\\" (click)=\\\"delete()\\\">Delete</ion-button> -->\\n  \\n  </ion-content>\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { Routes, RouterModule } from '@angular/router';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { PerfilPageRoutingModule } from './perfil-routing.module';\n\nimport { PerfilPage } from './perfil.page';\nimport { PerfilResolver } from './perfil.resolver';\nconst routes: Routes = [\n  {\n    path: '',\n    component: PerfilPage,\n    resolve: {\n      data: PerfilResolver\n    }\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ReactiveFormsModule,\n    RouterModule.forChild(routes)\n   \n  ],\n  declarations: [PerfilPage],\n  providers: [\n    PerfilResolver\n  ]\n})\nexport class PerfilPageModule {}\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BlcmZpbC9wZXJmaWwucGFnZS5zY3NzIn0= */\"","import { Component, OnInit } from '@angular/core';\nimport { AuthService } from 'src/services/auth.service';\nimport { LoadingController, ToastController } from '@ionic/angular';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { Validators, FormBuilder, FormGroup, FormControl } from '@angular/forms';\nimport { ImagePicker } from '@ionic-native/image-picker/ngx';\nimport { WebView } from '@ionic-native/ionic-webview/ngx';\nimport { FirebaseService } from 'src/services/firebase.service';\n\n@Component({\n  selector: 'app-perfil',\n  templateUrl: './perfil.page.html',\n  styleUrls: ['./perfil.page.scss'],\n})\nexport class PerfilPage implements OnInit {\n  // items: Array<any>;\n  usuario: any;\n  validations_form: FormGroup;\n  image: any;\n\n\n  \n\n  constructor(\n    public loadingCtrl: LoadingController,\n    private authService: AuthService,\n    private router: Router,\n    private route: ActivatedRoute,\n    private formBuilder: FormBuilder,\n    public toastCtrl: ToastController,\n    private imagePicker: ImagePicker,\n    private webview: WebView,\n    private firebaseService: FirebaseService\n\n\n\n\n\n  ) { }\n\n  ngOnInit() {\n   \n\n    if (this.route && this.route.data) {\n      this.getData();\n  }\n}\n\n\ngetData(){\n  this.route.data.subscribe(routeData => {\n   let data = routeData['data'];\n   if (data) {\n     this.usuario = data;\n     this.image=this.usuario.photoURL;\n     console.log(\"ruta imagen perfil\"+this.usuario.photoURL)\n  \n    //  this.image = this.item.image;\n   }\n  })\n  this.validations_form = this.formBuilder.group({\n    email: new FormControl(this.usuario.email, Validators.required),\n    displayName: new FormControl(this.usuario.displayName, Validators.required)\n  });\n}\nasync onSubmit(value){\n  let data = {\n    email: value.email,\n    displayName: value.displayName,\n    photoURL: this.image\n\n   \n  }\n  this.firebaseService.actualizarPerfil(value.photoURL,data)\n  .then(\n    res => {\n      this.router.navigate([\"/home\"]);\n    }\n  )\n}\n\n\nopenImagePicker(){\n  this.imagePicker.hasReadPermission()\n  .then((result) => {\n    if(result == false){\n      // no callbacks required as this opens a popup which returns async\n      this.imagePicker.requestReadPermission();\n    }\n    else if(result == true){\n      this.imagePicker.getPictures({\n        maximumImagesCount: 1\n      }).then(\n        (results) => {\n          for (var i = 0; i < results.length; i++) {\n            this.uploadImageToFirebase(results[i]);\n          }\n        }, (err) => console.log(err)\n      );\n    }\n  }, (err) => {\n    console.log(err);\n  });\n}\n\nasync uploadImageToFirebase(image){\n  const loading = await this.loadingCtrl.create({\n    message: 'Por favor espere...'\n  });\n  const toast = await this.toastCtrl.create({\n    message: 'La imagen ha sido actualizada.',\n    duration: 3000\n  });\n  this.presentLoading(loading);\n  let image_src = this.webview.convertFileSrc(image);\n\n  //uploads img to firebase storage\n\n  this.firebaseService.uploadImage(image_src)\n  .then(photoURL => {\n    this.image = photoURL;\n    loading.dismiss();\n    toast.present();\n  }, err =>{\n    console.log(err);\n  })\n}\n  async presentLoading(loading) {\n    return await loading.present();\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { Resolve, ActivatedRouteSnapshot, ActivatedRoute } from \"@angular/router\";\nimport { FirebaseService } from 'src/services/firebase.service';\n\n@Injectable()\nexport class PerfilResolver implements Resolve<any> {\n\n  constructor(public firebaseService: FirebaseService,) { }\n\n  resolve(route: ActivatedRouteSnapshot) {\n\n    return new Promise((resolve, reject) => {\n     \n      this.firebaseService.getPerfil()\n      .then(data => {\n       \n        resolve(data);\n      }, err => {\n        reject(err);\n      })\n    })\n  }\n}"],"sourceRoot":""}